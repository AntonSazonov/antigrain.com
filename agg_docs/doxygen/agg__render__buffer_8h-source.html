<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>agg_render_buffer.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>agg_render_buffer.h</h1><a href="agg__render__buffer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------------</font>
00002 <font class="comment">// Anti-Grain Geometry - Version 2.0 </font>
00003 <font class="comment">// Copyright (C) 2002 Maxim Shemanarev (McSeem)</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Permission to copy, use, modify, sell and distribute this software </font>
00006 <font class="comment">// is granted provided this copyright notice appears in all copies. </font>
00007 <font class="comment">// This software is provided "as is" without express or implied</font>
00008 <font class="comment">// warranty, and with no claim as to its suitability for any purpose.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">//----------------------------------------------------------------------------</font>
00011 <font class="comment">// Contact: mcseem@antigrain.com</font>
00012 <font class="comment">//          mcseemagg@yahoo.com</font>
00013 <font class="comment">//          http://www.antigrain.com</font>
00014 <font class="comment">//----------------------------------------------------------------------------</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// class render_buffer</font>
00017 <font class="comment">//</font>
00018 <font class="comment">//----------------------------------------------------------------------------</font>
00019 
00020 <font class="preprocessor">#ifndef AGG_RENDER_BUFFER_INCLUDED</font>
00021 <font class="preprocessor"></font><font class="preprocessor">#define AGG_RENDER_BUFFER_INCLUDED</font>
00022 <font class="preprocessor"></font>
00023 <font class="preprocessor">#include "<a class="code" href="agg__basics_8h.html">agg_basics.h</a>"</font>
00024 
00025 <font class="keyword">namespace </font>agg
00026 {
00027 
00028     <font class="comment">//========================================================================</font>
00029     <font class="comment">// Rendering buffer wrapper. This class does not know anything about </font>
00030     <font class="comment">// memory organizations, all it does it keeps an array of pointers </font>
00031     <font class="comment">// to every row. The general rules of rendering are as follows.</font>
00032     <font class="comment">// </font>
00033     <font class="comment">// 1. Allocate or create somehow a rendering buffer itself. Since </font>
00034     <font class="comment">//    the library does not depend on any particular platform or</font>
00035     <font class="comment">//    architecture it was decided that it's your responsibility </font>
00036     <font class="comment">//    to create and destroy rendering buffers properly. You can use</font>
00037     <font class="comment">//    any available mechanism to create it - you can use a system API </font>
00038     <font class="comment">//    function, simple memory allocation, or even statically defined array. </font>
00039     <font class="comment">//    You also should know the memory organization (or possible variants)</font>
00040     <font class="comment">//    in your system. For example, there's an R,G,B or B,G,R organizations </font>
00041     <font class="comment">//    with one byte per component (three byter per pixel) is used very often. </font>
00042     <font class="comment">//    So, if you intend to use class render_bgr24, for example, you should </font>
00043     <font class="comment">//    allocate at least width*height*3 bytes of memory.</font>
00044     <font class="comment">//</font>
00045     <font class="comment">// 2. Create render_buffer object and then call method attach(). It requires</font>
00046     <font class="comment">//    a pointer to the buffer itself, width and height of the buffer in </font>
00047     <font class="comment">//    pixels, and the length of one row in bytes. All these values must </font>
00048     <font class="comment">//    properly correspond to the memory organization. The argument row_length</font>
00049     <font class="comment">//    is used because in reality the row length in bytes does not obligatory </font>
00050     <font class="comment">//    correspond to the width of the image in pixels, i.e. it cannot be </font>
00051     <font class="comment">//    simply calculated as width_in_pixels * bytes_per_pixel. For example, </font>
00052     <font class="comment">//    it can be aligned to 4 bytes as in Windows bitmaps. Besides, the value</font>
00053     <font class="comment">//    of row_bytes can be negative - it depends on the order of displaying</font>
00054     <font class="comment">//    the rendering buffer - from top to bottom or from bottom to top. </font>
00055     <font class="comment">//    In other words, if row_bytes &gt; 0 the pointers to each row will start </font>
00056     <font class="comment">//    from the beginning of the buffer and increase. If it &lt; 0, the pointers </font>
00057     <font class="comment">//    start from the end of the buffer and decrease. It gives you an </font>
00058     <font class="comment">//    additional degree of freedom.</font>
00059     <font class="comment">//    Method attach() can be called more than once. The execution time of it</font>
00060     <font class="comment">//    is very little, still it allocates memory of heigh * sizeof(char*) bytes</font>
00061     <font class="comment">//    and has a loop while(height--) {...}, so it's unreasonable to call it</font>
00062     <font class="comment">//    every time before drawing any single pixel :-)</font>
00063     <font class="comment">//</font>
00064     <font class="comment">// 3. Create an object (or a number of objects) of a rendering class, such as</font>
00065     <font class="comment">//    render_bgr24_solid, render_bgr24_image and so on. These classes</font>
00066     <font class="comment">//    require a pointer to the render_buffer object, but they do not perform</font>
00067     <font class="comment">//    any considerable operations except storing this pointer. So, rendering</font>
00068     <font class="comment">//    objects can be created on demand almost any time. These objects know </font>
00069     <font class="comment">//    about concrete memory organization (this knowledge is hardcoded), so </font>
00070     <font class="comment">//    actually, the memory you allocated or created in clause 1 should </font>
00071     <font class="comment">//    actually be in correspondence to the needs of the rendering class.</font>
00072     <font class="comment">//  </font>
00073     <font class="comment">// 4. Rener your image using rendering functions, for example, render_outline()</font>
00074     <font class="comment">//  </font>
00075     <font class="comment">// 5. Display the result, or store it or whatever. It's also your </font>
00076     <font class="comment">//    responsibility and depends on the platform.</font>
00077     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00078"></a><a class="code" href="classagg_1_1render__buffer.html">00078</a>     <font class="keyword">class </font>render_buffer
00079     {
00080     <font class="keyword">public</font>:
00081         <a class="code" href="classagg_1_1render__buffer.html#a0">~render_buffer</a>();
00082         <a class="code" href="classagg_1_1render__buffer.html#a1">render_buffer</a>();
00083 
00084         <font class="comment">//-----------------------------------------Initialization</font>
00085         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1render__buffer.html#a2">attach</a>(<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* buf,
00086                     <font class="keywordtype">unsigned</font> width, 
00087                     <font class="keywordtype">unsigned</font> height,
00088                     <font class="keywordtype">int</font>      row_bytes);
00089 
00090         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1render__buffer.html#a3">set_clip_box</a>(rect cb);
00091 
00092         <font class="comment">//-----------------------------------------Acessors</font>
<a name="l00093"></a><a class="code" href="classagg_1_1render__buffer.html#a4">00093</a>         <font class="keywordtype">unsigned</font>    <a class="code" href="classagg_1_1render__buffer.html#a4">get_width</a>()     <font class="keyword">const</font> { <font class="keywordflow">return</font> <a class="code" href="classagg_1_1render__buffer.html#o2">m_width</a>;     }
<a name="l00094"></a><a class="code" href="classagg_1_1render__buffer.html#a5">00094</a>         <font class="keywordtype">unsigned</font>    <a class="code" href="classagg_1_1render__buffer.html#a5">get_height</a>()    <font class="keyword">const</font> { <font class="keywordflow">return</font> <a class="code" href="classagg_1_1render__buffer.html#o3">m_height</a>;    }
<a name="l00095"></a><a class="code" href="classagg_1_1render__buffer.html#a6">00095</a>         <font class="keywordtype">int</font>         <a class="code" href="classagg_1_1render__buffer.html#a6">get_row_bytes</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classagg_1_1render__buffer.html#o4">m_row_bytes</a>; }
<a name="l00096"></a><a class="code" href="classagg_1_1render__buffer.html#a7">00096</a>         <font class="keyword">const</font> rect&amp; <a class="code" href="classagg_1_1render__buffer.html#a7">get_clip_box</a>()  <font class="keyword">const</font> { <font class="keywordflow">return</font> <a class="code" href="classagg_1_1render__buffer.html#o6">m_clip_box</a>;  }
00097 
<a name="l00098"></a><a class="code" href="classagg_1_1render__buffer.html#a8">00098</a>         <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* <a class="code" href="classagg_1_1render__buffer.html#a8">get_row</a>(<font class="keywordtype">unsigned</font> y) { <font class="keywordflow">return</font> <a class="code" href="classagg_1_1render__buffer.html#o1">m_rows</a>[y];  }
00099 
00100     <font class="keyword">private</font>:
00101         <a class="code" href="classagg_1_1render__buffer.html#a1">render_buffer</a>(<font class="keyword">const</font> <a class="code" href="classagg_1_1render__buffer.html#a1">render_buffer</a>&amp;);
00102         <font class="keyword">const</font> <a class="code" href="classagg_1_1render__buffer.html#a1">render_buffer</a>&amp; <a class="code" href="classagg_1_1render__buffer.html#c1">operator = </a>(<font class="keyword">const</font> <a class="code" href="classagg_1_1render__buffer.html#a1">render_buffer</a>&amp;);
00103 
00104     <font class="keyword">private</font>:
<a name="l00105"></a><a class="code" href="classagg_1_1render__buffer.html#o0">00105</a>         <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>*  <a class="code" href="classagg_1_1render__buffer.html#o0">m_buf</a>;        <font class="comment">// Pointer to renrdering buffer</font>
<a name="l00106"></a><a class="code" href="classagg_1_1render__buffer.html#o1">00106</a>         <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>** <a class="code" href="classagg_1_1render__buffer.html#o1">m_rows</a>;       <font class="comment">// Pointers to each row of the buffer</font>
<a name="l00107"></a><a class="code" href="classagg_1_1render__buffer.html#o2">00107</a>         <font class="keywordtype">unsigned</font>        <a class="code" href="classagg_1_1render__buffer.html#o2">m_width</a>;      <font class="comment">// Width in pixels</font>
<a name="l00108"></a><a class="code" href="classagg_1_1render__buffer.html#o3">00108</a>         <font class="keywordtype">unsigned</font>        <a class="code" href="classagg_1_1render__buffer.html#o3">m_height</a>;     <font class="comment">// Height in pixels</font>
<a name="l00109"></a><a class="code" href="classagg_1_1render__buffer.html#o4">00109</a>         <font class="keywordtype">int</font>             <a class="code" href="classagg_1_1render__buffer.html#o4">m_row_bytes</a>;  <font class="comment">// Number of bytes per row. Can be &lt; 0</font>
<a name="l00110"></a><a class="code" href="classagg_1_1render__buffer.html#o5">00110</a>         <font class="keywordtype">unsigned</font>        <a class="code" href="classagg_1_1render__buffer.html#o5">m_max_height</a>; <font class="comment">// Maximal current height</font>
<a name="l00111"></a><a class="code" href="classagg_1_1render__buffer.html#o6">00111</a>         rect            <a class="code" href="classagg_1_1render__buffer.html#o6">m_clip_box</a>;
00112     };
00113 
00114 }
00115 
00116 
00117 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Tue Apr 23 09:06:33 2002 for AGG v2.0 beta by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
