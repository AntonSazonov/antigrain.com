<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>agg_conv_smooth_pline.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>agg_conv_smooth_pline.h</h1><a href="agg__conv__smooth__pline_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------------</font>
00002 <font class="comment">// Anti-Grain Geometry - Version 2.0 </font>
00003 <font class="comment">// Copyright (C) 2002 Maxim Shemanarev (McSeem)</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Permission to copy, use, modify, sell and distribute this software </font>
00006 <font class="comment">// is granted provided this copyright notice appears in all copies. </font>
00007 <font class="comment">// This software is provided "as is" without express or implied</font>
00008 <font class="comment">// warranty, and with no claim as to its suitability for any purpose.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">//----------------------------------------------------------------------------</font>
00011 <font class="comment">// Contact: mcseem@antigrain.com</font>
00012 <font class="comment">//          mcseemagg@yahoo.com</font>
00013 <font class="comment">//          http://www.antigrain.com</font>
00014 <font class="comment">//----------------------------------------------------------------------------</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// class conv_smooth_polyline</font>
00017 <font class="comment">//</font>
00018 <font class="comment">//----------------------------------------------------------------------------</font>
00019 
00020 <font class="preprocessor">#ifndef AGG_CONV_SMOOTH_PLINE_INCLUDED</font>
00021 <font class="preprocessor"></font><font class="preprocessor">#define AGG_CONV_SMOOTH_PLINE_INCLUDED</font>
00022 <font class="preprocessor"></font>
00023 <font class="preprocessor">#include &lt;math.h&gt;</font>
00024 <font class="preprocessor">#include "<a class="code" href="agg__basics_8h.html">agg_basics.h</a>"</font>
00025 <font class="preprocessor">#include "<a class="code" href="agg__path__storage_8h.html">agg_path_storage.h</a>"</font>
00026 
00027 <font class="keyword">namespace </font>agg
00028 {
00029 
00030     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00031"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html">00031</a>     <font class="keyword">template</font>&lt;<font class="keyword">class</font> VertexSource&gt; <font class="keyword">class </font>conv_smooth_polyline
00032     {
<a name="l00033"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#u7">00033</a>         <font class="keyword">enum</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7">status</a>
00034         {
00035             <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u0">initial</a>,
00036             <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u1">accumulate</a>,
00037             <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u2">polygon</a>,
00038             <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u3">ctrl_b</a>,
00039             <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u4">ctrl_e</a>,
00040             <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u5">ctrl1</a>,
00041             <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u6">ctrl2</a>
00042         };
00043 
<a name="l00044"></a><a class="code" href="structagg_1_1conv__smooth__polyline_1_1poly__info.html">00044</a>         <font class="keyword">struct </font>poly_info
00045         {
<a name="l00046"></a><a class="code" href="structagg_1_1conv__smooth__polyline_1_1poly__info.html#m0">00046</a>             <font class="keywordtype">double</font> <a class="code" href="structagg_1_1conv__smooth__polyline_1_1poly__info.html#m0">mid_x</a>;
<a name="l00047"></a><a class="code" href="structagg_1_1conv__smooth__polyline_1_1poly__info.html#m1">00047</a>             <font class="keywordtype">double</font> <a class="code" href="structagg_1_1conv__smooth__polyline_1_1poly__info.html#m1">mid_y</a>;
<a name="l00048"></a><a class="code" href="structagg_1_1conv__smooth__polyline_1_1poly__info.html#m2">00048</a>             <font class="keywordtype">double</font> <a class="code" href="structagg_1_1conv__smooth__polyline_1_1poly__info.html#m2">len</a>;
00049         };
00050 
00051     <font class="keyword">public</font>:
<a name="l00052"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#a0">00052</a>         <a class="code" href="classagg_1_1conv__smooth__polyline.html#a0">~conv_smooth_polyline</a>()
00053         {
00054             <font class="keyword">delete</font> [] <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a>;
00055         }
00056 
<a name="l00057"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#a1">00057</a>         <a class="code" href="classagg_1_1conv__smooth__polyline.html#a1">conv_smooth_polyline</a>(VertexSource* source, <font class="keywordtype">double</font> thickness=1.0) :
00058           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o0">m_source</a>(source), 
00059           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u0">initial</a>), 
00060           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o5">m_last_flag</a>(<a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>),
00061           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a>(0),
00062           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">m_smooth_value</a>(1.0),
00063           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a>(0),
00064           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o13">m_max_vertices</a>(0),
00065           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a>(0)
00066         { }
00067 
00068 
<a name="l00069"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#a2">00069</a>         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#a2">set_smooth_value</a>(<font class="keywordtype">double</font> val) { <a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">m_smooth_value</a> = val; }
00070 
<a name="l00071"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#a3">00071</a>         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#a3">reset_iterator</a>(<font class="keywordtype">unsigned</font> start) 
00072         { 
00073             <a class="code" href="classagg_1_1conv__smooth__polyline.html#o0">m_source</a>-&gt;reset_iterator(start); 
00074             <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.remove_all();
00075             <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u0">initial</a>;
00076             <a class="code" href="classagg_1_1conv__smooth__polyline.html#o5">m_last_flag</a> = <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00077             <a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> = 0;
00078         }
00079 
00080         <a class="code" href="namespaceagg.html#a63">pathflag_e</a> <a class="code" href="classagg_1_1conv__smooth__polyline.html#a4">next_vertex</a>(<font class="keywordtype">double</font>* x, <font class="keywordtype">double</font>* y);
<a name="l00081"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#a5">00081</a>         <font class="keywordtype">int</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#a5">get_attribute_index</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> 0; }
00082 
00083     <font class="keyword">private</font>:
00084         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#c0">calculate</a>(<font class="keywordtype">unsigned</font> prev, <font class="keywordtype">unsigned</font> curr, <font class="keywordtype">unsigned</font> next);
00085 
00086     <font class="keyword">private</font>:
<a name="l00087"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o0">00087</a>         VertexSource* <a class="code" href="classagg_1_1conv__smooth__polyline.html#o0">m_source</a>;
<a name="l00088"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">00088</a>         path_storage  <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>;
<a name="l00089"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">00089</a>         <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7">status</a>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a>;
<a name="l00090"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o3">00090</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o3">m_start_x</a>;
<a name="l00091"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o4">00091</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o4">m_start_y</a>;
<a name="l00092"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o5">00092</a>         <a class="code" href="namespaceagg.html#a63">pathflag_e</a>    <a class="code" href="classagg_1_1conv__smooth__polyline.html#o5">m_last_flag</a>;
<a name="l00093"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">00093</a>         <font class="keywordtype">unsigned</font>      <a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a>;
<a name="l00094"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">00094</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">m_smooth_value</a>;
<a name="l00095"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o8">00095</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o8">m_ctrl1_x</a>;
<a name="l00096"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o9">00096</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o9">m_ctrl1_y</a>;
<a name="l00097"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o10">00097</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o10">m_ctrl2_x</a>;
<a name="l00098"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o11">00098</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polyline.html#o11">m_ctrl2_y</a>;
<a name="l00099"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">00099</a>         <font class="keywordtype">unsigned</font>      <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a>;
<a name="l00100"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o13">00100</a>         <font class="keywordtype">unsigned</font>      <a class="code" href="classagg_1_1conv__smooth__polyline.html#o13">m_max_vertices</a>;
<a name="l00101"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">00101</a>         poly_info*    <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a>;
00102     };
00103 
00104 
00105 
00106 
00107     <font class="comment">//------------------------------------------------------------------------</font>
00108     <font class="keyword">template</font>&lt;<font class="keyword">class</font> VertexSource&gt; 
<a name="l00109"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#c0">00109</a>     <font class="keywordtype">void</font> conv_smooth_polyline&lt;VertexSource&gt;::calculate(<font class="keywordtype">unsigned</font> prev, 
00110                                                        <font class="keywordtype">unsigned</font> curr, 
00111                                                        <font class="keywordtype">unsigned</font> next)
00112     {
00113         <font class="keywordtype">double</font> x1, y1, x2, y2;
00114 
00115         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.get_vertex(curr, &amp;x1, &amp;y1);
00116         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.get_vertex(next, &amp;x2, &amp;y2);
00117 
00118         <font class="keyword">const</font> poly_info* p1 = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a> + prev;
00119         <font class="keyword">const</font> poly_info* p2 = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a> + curr;
00120         <font class="keyword">const</font> poly_info* p3 = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a> + next;
00121 
00122         <font class="keywordtype">double</font> k1 = p1-&gt;len / (p1-&gt;len + p2-&gt;len);
00123         <font class="keywordtype">double</font> k2 = p2-&gt;len / (p2-&gt;len + p3-&gt;len);
00124 
00125         <font class="keywordtype">double</font> xm1 = p1-&gt;mid_x + (p2-&gt;mid_x - p1-&gt;mid_x) * k1;
00126         <font class="keywordtype">double</font> ym1 = p1-&gt;mid_y + (p2-&gt;mid_y - p1-&gt;mid_y) * k1;
00127 
00128         <font class="keywordtype">double</font> xm2 = p2-&gt;mid_x + (p3-&gt;mid_x - p2-&gt;mid_x) * k2;
00129         <font class="keywordtype">double</font> ym2 = p2-&gt;mid_y + (p3-&gt;mid_y - p2-&gt;mid_y) * k2;
00130 
00131         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o8">m_ctrl1_x</a> = xm1 + (p2-&gt;mid_x - xm1) * <a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">m_smooth_value</a> + x1 - xm1;
00132         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o9">m_ctrl1_y</a> = ym1 + (p2-&gt;mid_y - ym1) * <a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">m_smooth_value</a> + y1 - ym1;
00133 
00134         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o10">m_ctrl2_x</a> = xm2 + (p2-&gt;mid_x - xm2) * <a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">m_smooth_value</a> + x2 - xm2;
00135         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o11">m_ctrl2_y</a> = ym2 + (p2-&gt;mid_y - ym2) * <a class="code" href="classagg_1_1conv__smooth__polyline.html#o7">m_smooth_value</a> + y2 - ym2;
00136     }
00137 
00138 
00139 
00140     <font class="comment">//------------------------------------------------------------------------</font>
00141     <font class="keyword">template</font>&lt;<font class="keyword">class</font> VertexSource&gt; 
<a name="l00142"></a><a class="code" href="classagg_1_1conv__smooth__polyline.html#a4">00142</a>     <a class="code" href="namespaceagg.html#a63">pathflag_e</a> conv_smooth_polyline&lt;VertexSource&gt;::next_vertex(<font class="keywordtype">double</font>* x, <font class="keywordtype">double</font>* y)
00143     {
00144         <a class="code" href="namespaceagg.html#a63">pathflag_e</a> flag;
00145         <font class="keywordtype">unsigned</font> i;
00146 
00147         <font class="keywordflow">for</font>(;;)
00148         {
00149             <font class="keywordflow">switch</font>(m_status)
00150             {
00151             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u0">initial</a>:
00152                 flag = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o0">m_source</a>-&gt;next_vertex(&amp;<a class="code" href="classagg_1_1conv__smooth__polyline.html#o3">m_start_x</a>, &amp;<a class="code" href="classagg_1_1conv__smooth__polyline.html#o4">m_start_y</a>);
00153                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u1">accumulate</a>;
00154                 <font class="keywordflow">break</font>;
00155 
00156             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u1">accumulate</a>:
00157                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o5">m_last_flag</a> == <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>) <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>;
00158                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.remove_all();
00159 
00160                 <font class="keywordflow">for</font>(;;)
00161                 {
00162                     flag = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o5">m_last_flag</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o0">m_source</a>-&gt;next_vertex(x, y);
00163                     <font class="keywordflow">if</font>(flag != <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>) <font class="keywordflow">break</font>;
00164                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o3">m_start_x</a> = *x;
00165                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o4">m_start_y</a> = *y;
00166                 }
00167 
00168                 <font class="keywordflow">if</font>(flag == <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>) <font class="keywordflow">break</font>;
00169 
00170                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.move_to(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o3">m_start_x</a>, <a class="code" href="classagg_1_1conv__smooth__polyline.html#o4">m_start_y</a>);
00171                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.line_to(*x, *y);
00172                 <font class="keywordflow">for</font>(;;)
00173                 {
00174                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o5">m_last_flag</a> = flag = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o0">m_source</a>-&gt;next_vertex(x, y);
00175                     <font class="keywordflow">if</font>(flag == <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>)
00176                     {
00177                         <font class="keywordflow">break</font>;
00178                     }
00179                     <font class="keywordflow">if</font>(flag == <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>)
00180                     {
00181                         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o3">m_start_x</a> = *x;
00182                         <a class="code" href="classagg_1_1conv__smooth__polyline.html#o4">m_start_y</a> = *y;
00183                         <font class="keywordflow">break</font>;
00184                     }
00185                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.add_vertex(*x, *y, flag);
00186                 }
00187                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.filter_vertices(<font class="keyword">false</font>);
00188                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.total_vertices() &lt; 2) <font class="keywordflow">break</font>;
00189                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.total_vertices() &gt; <a class="code" href="classagg_1_1conv__smooth__polyline.html#o13">m_max_vertices</a>)
00190                 {
00191                     <font class="keyword">delete</font> [] <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a>;
00192                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o13">m_max_vertices</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.total_vertices();
00193                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a> = <font class="keyword">new</font> poly_info[<a class="code" href="classagg_1_1conv__smooth__polyline.html#o13">m_max_vertices</a>];
00194                 }
00195                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.total_vertices();
00196                 <font class="keywordflow">for</font>(i = 0; i &lt; <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a>; i++)
00197                 {
00198                     <font class="keywordtype">double</font> x1, y1;
00199                     <font class="keywordtype">double</font> x2, y2;
00200                     poly_info* p = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o14">m_poly_info</a> + i;
00201                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.get_vertex(i, &amp;x1, &amp;y1);
00202                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.get_vertex((i+1) % <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a>, &amp;x2, &amp;y2);
00203                     p-&gt;mid_x = (x1 + x2) * 0.5;
00204                     p-&gt;mid_y = (y1 + y2) * 0.5;
00205                     p-&gt;len = sqrt((x2-x1) * (x2-x1) + (y2-y1) * (y2-y1));
00206                 }
00207                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> = 0;
00208                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u2">polygon</a>;
00209                 <font class="keywordflow">break</font>;
00210 
00211             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u2">polygon</a>:
00212                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a> == 2)
00213                 {
00214                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.get_vertex(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a>++, x, y);
00215                     <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> == 1) <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00216                     <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> == 2) <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a27">pathflag_line_to</a>;
00217                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u1">accumulate</a>;
00218                     <font class="keywordflow">break</font>;
00219                 }
00220 
00221                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> &gt;= <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a> - 1)
00222                 {
00223                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.get_vertex(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a>, x, y);
00224                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u1">accumulate</a>;
00225                     <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a28">pathflag_curve3</a>;
00226                 }
00227 
00228                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#c0">calculate</a>((<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> + <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a> - 1) % <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a>,
00229                           <a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a>, 
00230                           (<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> + 1) % <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a>);
00231 
00232                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o1">m_accumulator</a>.get_vertex(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a>++, x, y);
00233                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> == 1)
00234                 {
00235                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u3">ctrl_b</a>;
00236                     <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00237                 }
00238                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polyline.html#o6">m_curr_idx</a> &gt;= <a class="code" href="classagg_1_1conv__smooth__polyline.html#o12">m_total_vertices</a> - 1)
00239                 {
00240                     <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u4">ctrl_e</a>;
00241                     <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a28">pathflag_curve3</a>;
00242                 }
00243                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u5">ctrl1</a>;
00244                 <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a29">pathflag_curve4</a>;
00245 
00246             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u3">ctrl_b</a>:
00247                 *x = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o10">m_ctrl2_x</a>;
00248                 *y = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o11">m_ctrl2_y</a>;
00249                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u2">polygon</a>;
00250                 <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a28">pathflag_curve3</a>;
00251 
00252             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u4">ctrl_e</a>:
00253                 *x = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o8">m_ctrl1_x</a>;
00254                 *y = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o9">m_ctrl1_y</a>;
00255                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u2">polygon</a>;
00256                 <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a28">pathflag_curve3</a>;
00257 
00258             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u5">ctrl1</a>:
00259                 *x = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o8">m_ctrl1_x</a>;
00260                 *y = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o9">m_ctrl1_y</a>;
00261                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u6">ctrl2</a>;
00262                 <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a29">pathflag_curve4</a>;
00263 
00264             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u6">ctrl2</a>:
00265                 *x = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o10">m_ctrl2_x</a>;
00266                 *y = <a class="code" href="classagg_1_1conv__smooth__polyline.html#o11">m_ctrl2_y</a>;
00267                 <a class="code" href="classagg_1_1conv__smooth__polyline.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polyline.html#u7u2">polygon</a>;
00268                 <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a29">pathflag_curve4</a>;
00269 
00270             }
00271         }
00272         <font class="keywordflow">return</font> flag;
00273     }
00274 
00275 
00276 
00277 }
00278 
00279 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Tue Apr 23 09:06:33 2002 for AGG v2.0 beta by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
