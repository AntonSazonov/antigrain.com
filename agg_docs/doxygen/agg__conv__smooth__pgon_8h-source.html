<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>agg_conv_smooth_pgon.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>agg_conv_smooth_pgon.h</h1><a href="agg__conv__smooth__pgon_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------------</font>
00002 <font class="comment">// Anti-Grain Geometry - Version 2.0 </font>
00003 <font class="comment">// Copyright (C) 2002 Maxim Shemanarev (McSeem)</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Permission to copy, use, modify, sell and distribute this software </font>
00006 <font class="comment">// is granted provided this copyright notice appears in all copies. </font>
00007 <font class="comment">// This software is provided "as is" without express or implied</font>
00008 <font class="comment">// warranty, and with no claim as to its suitability for any purpose.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">//----------------------------------------------------------------------------</font>
00011 <font class="comment">// Contact: mcseem@antigrain.com</font>
00012 <font class="comment">//          mcseemagg@yahoo.com</font>
00013 <font class="comment">//          http://www.antigrain.com</font>
00014 <font class="comment">//----------------------------------------------------------------------------</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// class conv_smooth_polygon</font>
00017 <font class="comment">//</font>
00018 <font class="comment">//----------------------------------------------------------------------------</font>
00019 
00020 <font class="preprocessor">#ifndef AGG_CONV_SMOOTH_PGON_INCLUDED</font>
00021 <font class="preprocessor"></font><font class="preprocessor">#define AGG_CONV_SMOOTH_PGON_INCLUDED</font>
00022 <font class="preprocessor"></font>
00023 <font class="preprocessor">#include &lt;math.h&gt;</font>
00024 <font class="preprocessor">#include "<a class="code" href="agg__basics_8h.html">agg_basics.h</a>"</font>
00025 <font class="preprocessor">#include "<a class="code" href="agg__path__storage_8h.html">agg_path_storage.h</a>"</font>
00026 
00027 <font class="keyword">namespace </font>agg
00028 {
00029 
00030     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00031"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html">00031</a>     <font class="keyword">template</font>&lt;<font class="keyword">class</font> VertexSource&gt; <font class="keyword">class </font>conv_smooth_polygon
00032     {
<a name="l00033"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#u5">00033</a>         <font class="keyword">enum</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5">status</a>
00034         {
00035             <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u0">initial</a>,
00036             <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u1">accumulate</a>,
00037             <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u2">polygon</a>,
00038             <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u3">ctrl1</a>,
00039             <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u4">ctrl2</a>
00040         };
00041 
<a name="l00042"></a><a class="code" href="structagg_1_1conv__smooth__polygon_1_1poly__info.html">00042</a>         <font class="keyword">struct </font>poly_info
00043         {
<a name="l00044"></a><a class="code" href="structagg_1_1conv__smooth__polygon_1_1poly__info.html#m0">00044</a>             <font class="keywordtype">double</font> <a class="code" href="structagg_1_1conv__smooth__polygon_1_1poly__info.html#m0">mid_x</a>;
<a name="l00045"></a><a class="code" href="structagg_1_1conv__smooth__polygon_1_1poly__info.html#m1">00045</a>             <font class="keywordtype">double</font> <a class="code" href="structagg_1_1conv__smooth__polygon_1_1poly__info.html#m1">mid_y</a>;
<a name="l00046"></a><a class="code" href="structagg_1_1conv__smooth__polygon_1_1poly__info.html#m2">00046</a>             <font class="keywordtype">double</font> <a class="code" href="structagg_1_1conv__smooth__polygon_1_1poly__info.html#m2">len</a>;
00047         };
00048 
00049     <font class="keyword">public</font>:
<a name="l00050"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#a0">00050</a>         <a class="code" href="classagg_1_1conv__smooth__polygon.html#a0">~conv_smooth_polygon</a>()
00051         {
00052             <font class="keyword">delete</font> [] <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a>;
00053         }
00054 
<a name="l00055"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#a1">00055</a>         <a class="code" href="classagg_1_1conv__smooth__polygon.html#a1">conv_smooth_polygon</a>(VertexSource* source, <font class="keywordtype">double</font> thickness=1.0) :
00056           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o0">m_source</a>(source), 
00057           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a>(<a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u0">initial</a>), 
00058           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o5">m_last_flag</a>(<a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>),
00059           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a>(0),
00060           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">m_smooth_value</a>(1.0),
00061           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a>(0),
00062           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o13">m_max_vertices</a>(0),
00063           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a>(0)
00064         { }
00065 
00066 
<a name="l00067"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#a2">00067</a>         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#a2">set_smooth_value</a>(<font class="keywordtype">double</font> val) { <a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">m_smooth_value</a> = val; }
00068 
<a name="l00069"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#a3">00069</a>         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#a3">reset_iterator</a>(<font class="keywordtype">unsigned</font> start) 
00070         { 
00071             <a class="code" href="classagg_1_1conv__smooth__polygon.html#o0">m_source</a>-&gt;reset_iterator(start); 
00072             <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.remove_all();
00073             <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u0">initial</a>;
00074             <a class="code" href="classagg_1_1conv__smooth__polygon.html#o5">m_last_flag</a> = <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00075             <a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a> = 0;
00076         }
00077 
00078         <a class="code" href="namespaceagg.html#a63">pathflag_e</a> <a class="code" href="classagg_1_1conv__smooth__polygon.html#a4">next_vertex</a>(<font class="keywordtype">double</font>* x, <font class="keywordtype">double</font>* y);
<a name="l00079"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#a5">00079</a>         <font class="keywordtype">int</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#a5">get_attribute_index</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> 0; }
00080 
00081     <font class="keyword">private</font>:
00082         <font class="keywordtype">void</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#c0">calculate</a>(<font class="keywordtype">unsigned</font> prev, <font class="keywordtype">unsigned</font> curr, <font class="keywordtype">unsigned</font> next);
00083 
00084     <font class="keyword">private</font>:
<a name="l00085"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o0">00085</a>         VertexSource* <a class="code" href="classagg_1_1conv__smooth__polygon.html#o0">m_source</a>;
<a name="l00086"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">00086</a>         path_storage  <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>;
<a name="l00087"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">00087</a>         <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5">status</a>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a>;
<a name="l00088"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o3">00088</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o3">m_start_x</a>;
<a name="l00089"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o4">00089</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o4">m_start_y</a>;
<a name="l00090"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o5">00090</a>         <a class="code" href="namespaceagg.html#a63">pathflag_e</a>    <a class="code" href="classagg_1_1conv__smooth__polygon.html#o5">m_last_flag</a>;
<a name="l00091"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">00091</a>         <font class="keywordtype">unsigned</font>      <a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a>;
<a name="l00092"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">00092</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">m_smooth_value</a>;
<a name="l00093"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o8">00093</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o8">m_ctrl1_x</a>;
<a name="l00094"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o9">00094</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o9">m_ctrl1_y</a>;
<a name="l00095"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o10">00095</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o10">m_ctrl2_x</a>;
<a name="l00096"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o11">00096</a>         <font class="keywordtype">double</font>        <a class="code" href="classagg_1_1conv__smooth__polygon.html#o11">m_ctrl2_y</a>;
<a name="l00097"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">00097</a>         <font class="keywordtype">unsigned</font>      <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a>;
<a name="l00098"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o13">00098</a>         <font class="keywordtype">unsigned</font>      <a class="code" href="classagg_1_1conv__smooth__polygon.html#o13">m_max_vertices</a>;
<a name="l00099"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">00099</a>         poly_info*    <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a>;
00100     };
00101 
00102 
00103 
00104 
00105     <font class="comment">//------------------------------------------------------------------------</font>
00106     <font class="keyword">template</font>&lt;<font class="keyword">class</font> VertexSource&gt; 
<a name="l00107"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#c0">00107</a>     <font class="keywordtype">void</font> conv_smooth_polygon&lt;VertexSource&gt;::calculate(<font class="keywordtype">unsigned</font> prev, 
00108                                                       <font class="keywordtype">unsigned</font> curr, 
00109                                                       <font class="keywordtype">unsigned</font> next)
00110     {
00111         <font class="keywordtype">double</font> x1, y1, x2, y2;
00112 
00113         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.get_vertex(curr, &amp;x1, &amp;y1);
00114         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.get_vertex(next, &amp;x2, &amp;y2);
00115 
00116         <font class="keyword">const</font> poly_info* p1 = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a> + prev;
00117         <font class="keyword">const</font> poly_info* p2 = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a> + curr;
00118         <font class="keyword">const</font> poly_info* p3 = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a> + next;
00119 
00120         <font class="keywordtype">double</font> k1 = p1-&gt;len / (p1-&gt;len + p2-&gt;len);
00121         <font class="keywordtype">double</font> k2 = p2-&gt;len / (p2-&gt;len + p3-&gt;len);
00122 
00123         <font class="keywordtype">double</font> xm1 = p1-&gt;mid_x + (p2-&gt;mid_x - p1-&gt;mid_x) * k1;
00124         <font class="keywordtype">double</font> ym1 = p1-&gt;mid_y + (p2-&gt;mid_y - p1-&gt;mid_y) * k1;
00125 
00126         <font class="keywordtype">double</font> xm2 = p2-&gt;mid_x + (p3-&gt;mid_x - p2-&gt;mid_x) * k2;
00127         <font class="keywordtype">double</font> ym2 = p2-&gt;mid_y + (p3-&gt;mid_y - p2-&gt;mid_y) * k2;
00128 
00129         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o8">m_ctrl1_x</a> = xm1 + (p2-&gt;mid_x - xm1) * <a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">m_smooth_value</a> + x1 - xm1;
00130         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o9">m_ctrl1_y</a> = ym1 + (p2-&gt;mid_y - ym1) * <a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">m_smooth_value</a> + y1 - ym1;
00131 
00132         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o10">m_ctrl2_x</a> = xm2 + (p2-&gt;mid_x - xm2) * <a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">m_smooth_value</a> + x2 - xm2;
00133         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o11">m_ctrl2_y</a> = ym2 + (p2-&gt;mid_y - ym2) * <a class="code" href="classagg_1_1conv__smooth__polygon.html#o7">m_smooth_value</a> + y2 - ym2;
00134     }
00135 
00136 
00137 
00138     <font class="comment">//------------------------------------------------------------------------</font>
00139     <font class="keyword">template</font>&lt;<font class="keyword">class</font> VertexSource&gt; 
<a name="l00140"></a><a class="code" href="classagg_1_1conv__smooth__polygon.html#a4">00140</a>     <a class="code" href="namespaceagg.html#a63">pathflag_e</a> conv_smooth_polygon&lt;VertexSource&gt;::next_vertex(<font class="keywordtype">double</font>* x, <font class="keywordtype">double</font>* y)
00141     {
00142         <a class="code" href="namespaceagg.html#a63">pathflag_e</a> flag;
00143         <font class="keywordtype">unsigned</font> i;
00144 
00145         <font class="keywordflow">for</font>(;;)
00146         {
00147             <font class="keywordflow">switch</font>(m_status)
00148             {
00149             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u0">initial</a>:
00150                 flag = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o0">m_source</a>-&gt;next_vertex(&amp;<a class="code" href="classagg_1_1conv__smooth__polygon.html#o3">m_start_x</a>, &amp;<a class="code" href="classagg_1_1conv__smooth__polygon.html#o4">m_start_y</a>);
00151                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u1">accumulate</a>;
00152                 <font class="keywordflow">break</font>;
00153 
00154             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u1">accumulate</a>:
00155                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polygon.html#o5">m_last_flag</a> == <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>) <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>;
00156                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.remove_all();
00157 
00158                 <font class="keywordflow">for</font>(;;)
00159                 {
00160                     flag = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o5">m_last_flag</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o0">m_source</a>-&gt;next_vertex(x, y);
00161                     <font class="keywordflow">if</font>(flag != <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>) <font class="keywordflow">break</font>;
00162                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o3">m_start_x</a> = *x;
00163                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o4">m_start_y</a> = *y;
00164                 }
00165 
00166                 <font class="keywordflow">if</font>(flag == <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>) <font class="keywordflow">break</font>;
00167 
00168                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.move_to(<a class="code" href="classagg_1_1conv__smooth__polygon.html#o3">m_start_x</a>, <a class="code" href="classagg_1_1conv__smooth__polygon.html#o4">m_start_y</a>);
00169                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.line_to(*x, *y);
00170                 <font class="keywordflow">for</font>(;;)
00171                 {
00172                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o5">m_last_flag</a> = flag = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o0">m_source</a>-&gt;next_vertex(x, y);
00173                     <font class="keywordflow">if</font>(flag == <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>)
00174                     {
00175                         <font class="keywordflow">break</font>;
00176                     }
00177                     <font class="keywordflow">if</font>(flag == <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>)
00178                     {
00179                         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o3">m_start_x</a> = *x;
00180                         <a class="code" href="classagg_1_1conv__smooth__polygon.html#o4">m_start_y</a> = *y;
00181                         <font class="keywordflow">break</font>;
00182                     }
00183                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.add_vertex(*x, *y, flag);
00184                 }
00185                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.filter_vertices(<font class="keyword">true</font>);
00186                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.total_vertices() &lt; 3) <font class="keywordflow">break</font>;
00187                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.total_vertices() &gt; <a class="code" href="classagg_1_1conv__smooth__polygon.html#o13">m_max_vertices</a>)
00188                 {
00189                     <font class="keyword">delete</font> [] <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a>;
00190                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o13">m_max_vertices</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.total_vertices();
00191                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a> = <font class="keyword">new</font> poly_info[<a class="code" href="classagg_1_1conv__smooth__polygon.html#o13">m_max_vertices</a>];
00192                 }
00193                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.total_vertices();
00194                 <font class="keywordflow">for</font>(i = 0; i &lt; <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a>; i++)
00195                 {
00196                     <font class="keywordtype">double</font> x1, y1;
00197                     <font class="keywordtype">double</font> x2, y2;
00198                     poly_info* p = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o14">m_poly_info</a> + i;
00199                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.get_vertex(i, &amp;x1, &amp;y1);
00200                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.get_vertex((i+1) % <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a>, &amp;x2, &amp;y2);
00201                     p-&gt;mid_x = (x1 + x2) * 0.5;
00202                     p-&gt;mid_y = (y1 + y2) * 0.5;
00203                     p-&gt;len = sqrt((x2-x1) * (x2-x1) + (y2-y1) * (y2-y1));
00204                 }
00205                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a> = 0;
00206                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u2">polygon</a>;
00207                 <font class="keywordflow">break</font>;
00208 
00209             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u2">polygon</a>:
00210                 <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a> &gt;= <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a>)
00211                 {
00212                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.get_vertex(0, x, y);
00213                     <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u1">accumulate</a>;
00214                     <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a29">pathflag_curve4</a>;
00215                 }
00216 
00217                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#c0">calculate</a>((<a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a> + <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a> - 1) % <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a>,
00218                           <a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a>, 
00219                           (<a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a> + 1) % <a class="code" href="classagg_1_1conv__smooth__polygon.html#o12">m_total_vertices</a>);
00220 
00221                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o1">m_accumulator</a>.get_vertex(<a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a>, x, y);
00222                 ++<a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a>;
00223                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u3">ctrl1</a>;
00224                 <font class="keywordflow">return</font> (<a class="code" href="classagg_1_1conv__smooth__polygon.html#o6">m_curr_idx</a> == 1) ? <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a> : <a class="code" href="namespaceagg.html#a63a29">pathflag_curve4</a>;
00225 
00226             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u3">ctrl1</a>:
00227                 *x = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o8">m_ctrl1_x</a>;
00228                 *y = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o9">m_ctrl1_y</a>;
00229                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u4">ctrl2</a>;
00230                 <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a29">pathflag_curve4</a>;
00231 
00232             <font class="keywordflow">case</font> <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u4">ctrl2</a>:
00233                 *x = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o10">m_ctrl2_x</a>;
00234                 *y = <a class="code" href="classagg_1_1conv__smooth__polygon.html#o11">m_ctrl2_y</a>;
00235                 <a class="code" href="classagg_1_1conv__smooth__polygon.html#o2">m_status</a> = <a class="code" href="classagg_1_1conv__smooth__polygon.html#u5u2">polygon</a>;
00236                 <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a29">pathflag_curve4</a>;
00237 
00238             }
00239         }
00240         <font class="keywordflow">return</font> flag;
00241     }
00242 
00243 
00244 
00245 }
00246 
00247 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Tue Apr 23 09:06:33 2002 for AGG v2.0 beta by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
