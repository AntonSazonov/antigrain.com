<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>agg_gamma_spline.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>agg_gamma_spline.cpp</h1><a href="agg__gamma__spline_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------------</font>
00002 <font class="comment">// Anti-Grain Geometry - Version 2.0 </font>
00003 <font class="comment">// Copyright (C) 2002 Maxim Shemanarev (McSeem)</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Permission to copy, use, modify, sell and distribute this software </font>
00006 <font class="comment">// is granted provided this copyright notice appears in all copies. </font>
00007 <font class="comment">// This software is provided "as is" without express or implied</font>
00008 <font class="comment">// warranty, and with no claim as to its suitability for any purpose.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">//----------------------------------------------------------------------------</font>
00011 <font class="comment">// Contact: mcseem@antigrain.com</font>
00012 <font class="comment">//          mcseemagg@yahoo.com</font>
00013 <font class="comment">//          http://www.antigrain.com</font>
00014 <font class="comment">//----------------------------------------------------------------------------</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// class gamma_spline</font>
00017 <font class="comment">//</font>
00018 <font class="comment">//----------------------------------------------------------------------------</font>
00019 
00020 <font class="preprocessor">#include "<a class="code" href="agg__gamma__spline_8h.html">agg_gamma_spline.h</a>"</font>
00021 
00022 <font class="keyword">namespace </font>agg
00023 {
00024 
00025     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00026"></a><a class="code" href="classagg_1_1gamma__spline.html#a0">00026</a>     gamma_spline::gamma_spline() : 
00027         m_x1(0), m_y1(0), m_x2(10), m_y2(10), m_cur_x(0.0)
00028     {
00029         <a class="code" href="classagg_1_1gamma__spline.html#a1">set_values</a>(1.0, 1.0, 1.0, 1.0);
00030     }
00031 
00032 
00033     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00034"></a><a class="code" href="classagg_1_1gamma__spline.html#a3">00034</a>     <font class="keywordtype">double</font> gamma_spline::get_y(<font class="keywordtype">double</font> x)<font class="keyword"> const </font>
00035 <font class="keyword">    </font>{ 
00036         <font class="keywordflow">if</font>(x &lt; 0.0) x = 0.0;
00037         <font class="keywordflow">if</font>(x &gt; 1.0) x = 1.0;
00038         <font class="keywordtype">double</font> val = <a class="code" href="classagg_1_1gamma__spline.html#o3">m_spline</a>.get(x);
00039         <font class="keywordflow">if</font>(val &lt; 0.0) val = 0.0;
00040         <font class="keywordflow">if</font>(val &gt; 1.0) val = 1.0;
00041         <font class="keywordflow">return</font> val;
00042     }
00043 
00044 
00045 
00046     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00047"></a><a class="code" href="classagg_1_1gamma__spline.html#a1">00047</a>     <font class="keywordtype">void</font> gamma_spline::set_values(<font class="keywordtype">double</font> kx1, <font class="keywordtype">double</font> ky1, <font class="keywordtype">double</font> kx2, <font class="keywordtype">double</font> ky2)
00048     {
00049         <font class="keywordflow">if</font>(kx1 &lt; 0.001) kx1 = 0.001;
00050         <font class="keywordflow">if</font>(kx1 &gt; 1.999) kx1 = 1.999;
00051         <font class="keywordflow">if</font>(ky1 &lt; 0.001) ky1 = 0.001;
00052         <font class="keywordflow">if</font>(ky1 &gt; 1.999) ky1 = 1.999;
00053         <font class="keywordflow">if</font>(kx2 &lt; 0.001) kx2 = 0.001;
00054         <font class="keywordflow">if</font>(kx2 &gt; 1.999) kx2 = 1.999;
00055         <font class="keywordflow">if</font>(ky2 &lt; 0.001) ky2 = 0.001;
00056         <font class="keywordflow">if</font>(ky2 &gt; 1.999) ky2 = 1.999;
00057 
00058         <a class="code" href="classagg_1_1gamma__spline.html#o1">m_x</a>[0] = 0.0;
00059         <a class="code" href="classagg_1_1gamma__spline.html#o2">m_y</a>[0] = 0.0;
00060         <a class="code" href="classagg_1_1gamma__spline.html#o1">m_x</a>[1] = kx1 * 0.25;
00061         <a class="code" href="classagg_1_1gamma__spline.html#o2">m_y</a>[1] = ky1 * 0.25;
00062         <a class="code" href="classagg_1_1gamma__spline.html#o1">m_x</a>[2] = 1.0 - kx2 * 0.25;
00063         <a class="code" href="classagg_1_1gamma__spline.html#o2">m_y</a>[2] = 1.0 - ky2 * 0.25;
00064         <a class="code" href="classagg_1_1gamma__spline.html#o1">m_x</a>[3] = 1.0;
00065         <a class="code" href="classagg_1_1gamma__spline.html#o2">m_y</a>[3] = 1.0;
00066 
00067         <a class="code" href="classagg_1_1gamma__spline.html#o3">m_spline</a>.init(4, <a class="code" href="classagg_1_1gamma__spline.html#o1">m_x</a>, <a class="code" href="classagg_1_1gamma__spline.html#o2">m_y</a>);
00068 
00069         <font class="keywordtype">int</font> i;
00070         <font class="keywordflow">for</font>(i = 0; i &lt; 256; i++)
00071         {
00072             <a class="code" href="classagg_1_1gamma__spline.html#o0">m_gamma</a>[i] = (<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>)(<a class="code" href="classagg_1_1gamma__spline.html#a3">get_y</a>(<font class="keywordtype">double</font>(i) / 255.0) * 255.0);
00073         }
00074     }
00075 
00076 
00077     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00078"></a><a class="code" href="classagg_1_1gamma__spline.html#a4">00078</a>     <font class="keywordtype">void</font> gamma_spline::get_values(<font class="keywordtype">double</font>* kx1, <font class="keywordtype">double</font>* ky1, <font class="keywordtype">double</font>* kx2, <font class="keywordtype">double</font>* ky2)<font class="keyword"> const</font>
00079 <font class="keyword">    </font>{
00080         *kx1 = <a class="code" href="classagg_1_1gamma__spline.html#o1">m_x</a>[1] * 4.0;
00081         *ky1 = <a class="code" href="classagg_1_1gamma__spline.html#o2">m_y</a>[1] * 4.0;
00082         *kx2 = (1.0 - <a class="code" href="classagg_1_1gamma__spline.html#o1">m_x</a>[2]) * 4.0;
00083         *ky2 = (1.0 - <a class="code" href="classagg_1_1gamma__spline.html#o2">m_y</a>[2]) * 4.0;
00084     }
00085 
00086 
00087     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00088"></a><a class="code" href="classagg_1_1gamma__spline.html#a5">00088</a>     <font class="keywordtype">void</font> gamma_spline::set_box(<font class="keywordtype">double</font> x1, <font class="keywordtype">double</font> y1, <font class="keywordtype">double</font> x2, <font class="keywordtype">double</font> y2)
00089     {
00090         <a class="code" href="classagg_1_1gamma__spline.html#o4">m_x1</a> = x1;
00091         <a class="code" href="classagg_1_1gamma__spline.html#o5">m_y1</a> = y1;
00092         <a class="code" href="classagg_1_1gamma__spline.html#o6">m_x2</a> = x2;
00093         <a class="code" href="classagg_1_1gamma__spline.html#o7">m_y2</a> = y2;
00094     }
00095 
00096 
00097     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00098"></a><a class="code" href="classagg_1_1gamma__spline.html#a6">00098</a>     <font class="keywordtype">void</font> gamma_spline::reset_iterator(<font class="keywordtype">unsigned</font>)
00099     {
00100         <a class="code" href="classagg_1_1gamma__spline.html#o8">m_cur_x</a> = 0.0;
00101     }
00102 
00103 
00104     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00105"></a><a class="code" href="classagg_1_1gamma__spline.html#a7">00105</a>     <a class="code" href="namespaceagg.html#a63">pathflag_e</a> gamma_spline::next_vertex(<font class="keywordtype">double</font>* x, <font class="keywordtype">double</font>* y)
00106     {
00107         <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__spline.html#o8">m_cur_x</a> == 0.0) 
00108         {
00109             *x = <a class="code" href="classagg_1_1gamma__spline.html#o4">m_x1</a>;
00110             *y = <a class="code" href="classagg_1_1gamma__spline.html#o5">m_y1</a>;
00111             <a class="code" href="classagg_1_1gamma__spline.html#o8">m_cur_x</a> += 1.0 / (<a class="code" href="classagg_1_1gamma__spline.html#o6">m_x2</a> - <a class="code" href="classagg_1_1gamma__spline.html#o4">m_x1</a>);
00112             <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00113         }
00114 
00115         <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__spline.html#o8">m_cur_x</a> &gt; 1.0) 
00116         {
00117             <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>;
00118         }
00119         
00120         *x = <a class="code" href="classagg_1_1gamma__spline.html#o4">m_x1</a> + <a class="code" href="classagg_1_1gamma__spline.html#o8">m_cur_x</a> * (<a class="code" href="classagg_1_1gamma__spline.html#o6">m_x2</a> - <a class="code" href="classagg_1_1gamma__spline.html#o4">m_x1</a>);
00121         *y = <a class="code" href="classagg_1_1gamma__spline.html#o5">m_y1</a> + <a class="code" href="classagg_1_1gamma__spline.html#a3">get_y</a>(<a class="code" href="classagg_1_1gamma__spline.html#o8">m_cur_x</a>) * (<a class="code" href="classagg_1_1gamma__spline.html#o7">m_y2</a> - <a class="code" href="classagg_1_1gamma__spline.html#o5">m_y1</a>);
00122 
00123         <a class="code" href="classagg_1_1gamma__spline.html#o8">m_cur_x</a> += 1.0 / (<a class="code" href="classagg_1_1gamma__spline.html#o6">m_x2</a> - <a class="code" href="classagg_1_1gamma__spline.html#o4">m_x1</a>);
00124         <font class="keywordflow">return</font> <a class="code" href="namespaceagg.html#a63a27">pathflag_line_to</a>;
00125     }
00126   
00127 
00128 
00129 }
00130 
</pre></div><hr><address><small>Generated on Tue Apr 23 09:06:33 2002 for AGG v2.0 beta by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
