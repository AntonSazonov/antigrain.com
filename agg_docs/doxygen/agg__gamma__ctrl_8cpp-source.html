<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>agg_gamma_ctrl.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>agg_gamma_ctrl.cpp</h1><a href="agg__gamma__ctrl_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------------</font>
00002 <font class="comment">// Anti-Grain Geometry - Version 2.0 </font>
00003 <font class="comment">// Copyright (C) 2002 Maxim Shemanarev (McSeem)</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Permission to copy, use, modify, sell and distribute this software </font>
00006 <font class="comment">// is granted provided this copyright notice appears in all copies. </font>
00007 <font class="comment">// This software is provided "as is" without express or implied</font>
00008 <font class="comment">// warranty, and with no claim as to its suitability for any purpose.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">//----------------------------------------------------------------------------</font>
00011 <font class="comment">// Contact: mcseem@antigrain.com</font>
00012 <font class="comment">//          mcseemagg@yahoo.com</font>
00013 <font class="comment">//          http://www.antigrain.com</font>
00014 <font class="comment">//----------------------------------------------------------------------------</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// class gamma_ctrl</font>
00017 <font class="comment">//</font>
00018 <font class="comment">//----------------------------------------------------------------------------</font>
00019 
00020 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00021 <font class="preprocessor">#include "<a class="code" href="agg__gamma__ctrl_8h.html">agg_gamma_ctrl.h</a>"</font>
00022 <font class="preprocessor">#include "<a class="code" href="agg__math_8h.html">agg_math.h</a>"</font>
00023 
00024 <font class="keyword">namespace </font>agg
00025 {
00026 
00027     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00028"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a0">00028</a>     gamma_ctrl::gamma_ctrl(<font class="keywordtype">double</font> x1, <font class="keywordtype">double</font> y1, <font class="keywordtype">double</font> x2, <font class="keywordtype">double</font> y2) :
00029         m_x1(x1), m_y1(y1), m_x2(x2), m_y2(y2),
00030         m_background_color(<a class="code" href="namespaceagg.html#a45">rgba</a>(1.0, 1.0, 0.9)),
00031         m_border_color(<a class="code" href="namespaceagg.html#a45">rgba</a>(0.0, 0.0, 0.0)),
00032         m_curve_color(<a class="code" href="namespaceagg.html#a45">rgba</a>(0.0, 0.0, 0.0)),
00033         m_grid_color(<a class="code" href="namespaceagg.html#a45">rgba</a>(0.2, 0.2, 0.0)),
00034         m_inactive_pnt_color(<a class="code" href="namespaceagg.html#a45">rgba</a>(0.0, 0.0, 0.0)),
00035         m_active_pnt_color(<a class="code" href="namespaceagg.html#a45">rgba</a>(1.0, 0.0, 0.0)),
00036         m_text_color(<a class="code" href="namespaceagg.html#a45">rgba</a>(0.0, 0.0, 0.0)),
00037         m_border_thickness(2.0),
00038         m_curve_thickness(2.0),
00039         m_grid_thickness(0.2),
00040         m_text_thickness(1.0),
00041         m_point_size(4.0),
00042         m_text_height(9.0),
00043         m_text_width(0.0),
00044         m_xc1(x1),
00045         m_yc1(y1),
00046         m_xc2(x2),
00047         m_yc2(y2 - m_text_height * 2.0),
00048         m_xt1(x1),
00049         m_yt1(y2 - m_text_height * 2.0),
00050         m_xt2(x2),
00051         m_yt2(y2),
00052         m_curve_poly(&amp;m_gamma_spline),
00053         m_text_poly(&amp;m_text),
00054         m_idx(0),
00055         m_vertex(0),
00056         m_p1_active(true),
00057         m_mouse_point(0),
00058         m_pdx(0.0),
00059         m_pdy(0.0)
00060     {
00061         <a class="code" href="classagg_1_1gamma__ctrl.html#o12">m_colors</a>[0] = &amp;<a class="code" href="classagg_1_1gamma__ctrl.html#o5">m_background_color</a>;
00062         <a class="code" href="classagg_1_1gamma__ctrl.html#o12">m_colors</a>[1] = &amp;<a class="code" href="classagg_1_1gamma__ctrl.html#o6">m_border_color</a>;
00063         <a class="code" href="classagg_1_1gamma__ctrl.html#o12">m_colors</a>[2] = &amp;<a class="code" href="classagg_1_1gamma__ctrl.html#o7">m_curve_color</a>;
00064         <a class="code" href="classagg_1_1gamma__ctrl.html#o12">m_colors</a>[3] = &amp;<a class="code" href="classagg_1_1gamma__ctrl.html#o8">m_grid_color</a>;
00065         <a class="code" href="classagg_1_1gamma__ctrl.html#o12">m_colors</a>[4] = &amp;<a class="code" href="classagg_1_1gamma__ctrl.html#o9">m_inactive_pnt_color</a>;
00066         <a class="code" href="classagg_1_1gamma__ctrl.html#o12">m_colors</a>[5] = &amp;<a class="code" href="classagg_1_1gamma__ctrl.html#o10">m_active_pnt_color</a>;
00067         <a class="code" href="classagg_1_1gamma__ctrl.html#o12">m_colors</a>[6] = &amp;<a class="code" href="classagg_1_1gamma__ctrl.html#o11">m_text_color</a>;
00068         <a class="code" href="classagg_1_1gamma__ctrl.html#c0">calc_spline_box</a>();
00069     }
00070 
00071 
00072     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00073"></a><a class="code" href="classagg_1_1gamma__ctrl.html#c0">00073</a>     <font class="keywordtype">void</font> gamma_ctrl::calc_spline_box()
00074     {
00075         <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o20">m_xc1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>;
00076         <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o21">m_yc1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>;
00077         <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o22">m_xc2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>;
00078         <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o23">m_yc2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a> * 0.5;
00079     }
00080 
00081 
00082     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00083"></a><a class="code" href="classagg_1_1gamma__ctrl.html#c1">00083</a>     <font class="keywordtype">void</font> gamma_ctrl::calc_points()
00084     {
00085         <font class="keywordtype">double</font> kx1, ky1, kx2, ky2;
00086         <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.get_values(&amp;kx1, &amp;ky1, &amp;kx2, &amp;ky2);
00087         <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a> + (<a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>) * kx1 * 0.25;
00088         <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a> + (<a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>) * ky1 * 0.25;
00089         <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a> - (<a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>) * kx2 * 0.25;
00090         <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a> - (<a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>) * ky2 * 0.25;
00091     }
00092 
00093 
00094     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00095"></a><a class="code" href="classagg_1_1gamma__ctrl.html#c2">00095</a>     <font class="keywordtype">void</font> gamma_ctrl::calc_values()
00096     {
00097         <font class="keywordtype">double</font> kx1, ky1, kx2, ky2;
00098 
00099         kx1 = (<a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>) * 4.0 / (<a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>);
00100         ky1 = (<a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>) * 4.0 / (<a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>);
00101         kx2 = (<a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a>) * 4.0 / (<a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>);
00102         ky2 = (<a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a>) * 4.0 / (<a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>);
00103         <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.set_values(kx1, ky1, kx2, ky2);
00104     }
00105 
00106 
00107     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00108"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a12">00108</a>     <font class="keywordtype">void</font> gamma_ctrl::set_text_size(<font class="keywordtype">double</font> h, <font class="keywordtype">double</font> w) 
00109     { 
00110         <a class="code" href="classagg_1_1gamma__ctrl.html#o19">m_text_width</a> = w; 
00111         <a class="code" href="classagg_1_1gamma__ctrl.html#o18">m_text_height</a> = h; 
00112         <a class="code" href="classagg_1_1gamma__ctrl.html#o23">m_yc2</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o18">m_text_height</a> * 2.0;
00113         <a class="code" href="classagg_1_1gamma__ctrl.html#o29">m_yt1</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o18">m_text_height</a> * 2.0;
00114         <a class="code" href="classagg_1_1gamma__ctrl.html#c0">calc_spline_box</a>();
00115     }
00116 
00117 
00118     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00119"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a19">00119</a>     <font class="keywordtype">void</font> gamma_ctrl::set_values(<font class="keywordtype">double</font> kx1, <font class="keywordtype">double</font> ky1, <font class="keywordtype">double</font> kx2, <font class="keywordtype">double</font> ky2)
00120     {
00121         <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.set_values(kx1, ky1, kx2, ky2);
00122     }
00123 
00124 
00125     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00126"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a20">00126</a>     <font class="keywordtype">void</font> gamma_ctrl::get_values(<font class="keywordtype">double</font>* kx1, <font class="keywordtype">double</font>* ky1, <font class="keywordtype">double</font>* kx2, <font class="keywordtype">double</font>* ky2)<font class="keyword"> const</font>
00127 <font class="keyword">    </font>{
00128         <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.get_values(kx1, ky1, kx2, ky2);
00129     }
00130 
00131     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00132"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a26">00132</a>     <font class="keywordtype">void</font>  gamma_ctrl::reset_iterator(<font class="keywordtype">unsigned</font> idx)
00133     {
00134         <font class="keywordtype">double</font> kx1, ky1, kx2, ky2;
00135         <font class="keywordtype">char</font> tbuf[32];
00136 
00137         <a class="code" href="classagg_1_1gamma__ctrl.html#o36">m_idx</a> = idx;
00138 
00139         <font class="keywordflow">switch</font>(idx)
00140         {
00141         <font class="keywordflow">default</font>:
00142 
00143         <font class="keywordflow">case</font> 0:                 <font class="comment">// Background</font>
00144             <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> = 0;
00145             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[0] = <a class="code" href="classagg_1_1gamma__ctrl.html#o0">m_x1</a>; 
00146             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[0] = <a class="code" href="classagg_1_1gamma__ctrl.html#o1">m_y1</a>;
00147             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[1] = <a class="code" href="classagg_1_1gamma__ctrl.html#o2">m_x2</a>; 
00148             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[1] = <a class="code" href="classagg_1_1gamma__ctrl.html#o1">m_y1</a>;
00149             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[2] = <a class="code" href="classagg_1_1gamma__ctrl.html#o2">m_x2</a>; 
00150             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[2] = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a>;
00151             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[3] = <a class="code" href="classagg_1_1gamma__ctrl.html#o0">m_x1</a>; 
00152             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[3] = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a>;
00153             <font class="keywordflow">break</font>;
00154 
00155         <font class="keywordflow">case</font> 1:                 <font class="comment">// Border</font>
00156             <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> = 0;
00157             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[0] = <a class="code" href="classagg_1_1gamma__ctrl.html#o0">m_x1</a>; 
00158             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[0] = <a class="code" href="classagg_1_1gamma__ctrl.html#o1">m_y1</a>;
00159             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[1] = <a class="code" href="classagg_1_1gamma__ctrl.html#o2">m_x2</a>; 
00160             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[1] = <a class="code" href="classagg_1_1gamma__ctrl.html#o1">m_y1</a>;
00161             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[2] = <a class="code" href="classagg_1_1gamma__ctrl.html#o2">m_x2</a>; 
00162             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[2] = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a>;
00163             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[3] = <a class="code" href="classagg_1_1gamma__ctrl.html#o0">m_x1</a>; 
00164             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[3] = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a>;
00165             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[4] = <a class="code" href="classagg_1_1gamma__ctrl.html#o0">m_x1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00166             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[4] = <a class="code" href="classagg_1_1gamma__ctrl.html#o1">m_y1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00167             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[5] = <a class="code" href="classagg_1_1gamma__ctrl.html#o0">m_x1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00168             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[5] = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00169             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[6] = <a class="code" href="classagg_1_1gamma__ctrl.html#o2">m_x2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00170             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[6] = <a class="code" href="classagg_1_1gamma__ctrl.html#o3">m_y2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00171             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[7] = <a class="code" href="classagg_1_1gamma__ctrl.html#o2">m_x2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00172             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[7] = <a class="code" href="classagg_1_1gamma__ctrl.html#o1">m_y1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>; 
00173             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[8] = <a class="code" href="classagg_1_1gamma__ctrl.html#o20">m_xc1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>;
00174             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[8] = <a class="code" href="classagg_1_1gamma__ctrl.html#o23">m_yc2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a> * 0.5;
00175             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[9] = <a class="code" href="classagg_1_1gamma__ctrl.html#o22">m_xc2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>;
00176             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[9] = <a class="code" href="classagg_1_1gamma__ctrl.html#o23">m_yc2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a> * 0.5;
00177             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[10] = <a class="code" href="classagg_1_1gamma__ctrl.html#o22">m_xc2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>;
00178             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[10] = <a class="code" href="classagg_1_1gamma__ctrl.html#o23">m_yc2</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a> * 0.5;
00179             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[11] = <a class="code" href="classagg_1_1gamma__ctrl.html#o20">m_xc1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a>;
00180             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[11] = <a class="code" href="classagg_1_1gamma__ctrl.html#o23">m_yc2</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a> * 0.5;
00181             <font class="keywordflow">break</font>;
00182 
00183         <font class="keywordflow">case</font> 2:                 <font class="comment">// Curve</font>
00184             <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.set_box(<a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>);
00185             <a class="code" href="classagg_1_1gamma__ctrl.html#o32">m_curve_poly</a>.set_thickness(<a class="code" href="classagg_1_1gamma__ctrl.html#o14">m_curve_thickness</a>);
00186             <a class="code" href="classagg_1_1gamma__ctrl.html#o32">m_curve_poly</a>.reset_iterator(0);
00187             <font class="keywordflow">break</font>;
00188 
00189         <font class="keywordflow">case</font> 3:                 <font class="comment">// Grid</font>
00190             <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> = 0;
00191             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[0] = <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>;
00192             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[0] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>) * 0.5 - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00193             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[1] = <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>;
00194             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[1] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>) * 0.5 - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00195             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[2] = <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>;
00196             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[2] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>) * 0.5 + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00197             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[3] = <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>;
00198             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[3] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>) * 0.5 + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00199             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[4] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>) * 0.5 - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00200             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[4] = <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>;
00201             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[5] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>) * 0.5 - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00202             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[5] = <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>;
00203             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[6] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>) * 0.5 + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00204             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[6] = <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>;
00205             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[7] = (<a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>) * 0.5 + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00206             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[7] = <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>;
00207             <a class="code" href="classagg_1_1gamma__ctrl.html#c1">calc_points</a>();
00208             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[8] = <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>;
00209             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[8] = <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00210             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[9] = <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00211             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[9] = <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00212             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[10] = <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00213             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[10] = <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>;
00214             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[11] = <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00215             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[11] = <a class="code" href="classagg_1_1gamma__ctrl.html#o25">m_ys1</a>;
00216             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[12] = <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00217             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[12] = <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00218             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[13] = <a class="code" href="classagg_1_1gamma__ctrl.html#o24">m_xs1</a>;
00219             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[13] = <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00220             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[14] = <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>;
00221             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[14] = <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00222             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[15] = <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00223             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[15] = <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00224             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[16] = <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00225             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[16] = <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>;
00226             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[17] = <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00227             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[17] = <a class="code" href="classagg_1_1gamma__ctrl.html#o27">m_ys2</a>;
00228             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[18] = <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00229             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[18] = <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00230             <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[19] = <a class="code" href="classagg_1_1gamma__ctrl.html#o26">m_xs2</a>;
00231             <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[19] = <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a> - <a class="code" href="classagg_1_1gamma__ctrl.html#o15">m_grid_thickness</a> * 0.5;
00232             <font class="keywordflow">break</font>;
00233 
00234         <font class="keywordflow">case</font> 4:                 <font class="comment">// Point1</font>
00235             <a class="code" href="classagg_1_1gamma__ctrl.html#c1">calc_points</a>();
00236             <font class="keywordflow">if</font>(m_p1_active) <a class="code" href="classagg_1_1gamma__ctrl.html#o33">m_ellipse</a>.init(<a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, 10);
00237             <font class="keywordflow">else</font>            <a class="code" href="classagg_1_1gamma__ctrl.html#o33">m_ellipse</a>.init(<a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, 10);
00238             <font class="keywordflow">break</font>;
00239 
00240         <font class="keywordflow">case</font> 5:                 <font class="comment">// Point2</font>
00241             <a class="code" href="classagg_1_1gamma__ctrl.html#c1">calc_points</a>();
00242             <font class="keywordflow">if</font>(m_p1_active) <a class="code" href="classagg_1_1gamma__ctrl.html#o33">m_ellipse</a>.init(<a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, 10);
00243             <font class="keywordflow">else</font>            <a class="code" href="classagg_1_1gamma__ctrl.html#o33">m_ellipse</a>.init(<a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>, 10);
00244             <font class="keywordflow">break</font>;
00245 
00246         <font class="keywordflow">case</font> 6:                 <font class="comment">// Text</font>
00247             <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.get_values(&amp;kx1, &amp;ky1, &amp;kx2, &amp;ky2);
00248             sprintf(tbuf, <font class="stringliteral">"%5.3f %5.3f %5.3f %5.3f"</font>, kx1, ky1, kx2, ky2);
00249             <a class="code" href="classagg_1_1gamma__ctrl.html#o34">m_text</a>.set_text(tbuf);
00250             <a class="code" href="classagg_1_1gamma__ctrl.html#o34">m_text</a>.set_size(<a class="code" href="classagg_1_1gamma__ctrl.html#o18">m_text_height</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o19">m_text_width</a>);
00251             <a class="code" href="classagg_1_1gamma__ctrl.html#o34">m_text</a>.set_start_point(<a class="code" href="classagg_1_1gamma__ctrl.html#o28">m_xt1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o13">m_border_thickness</a> * 2.0, (<a class="code" href="classagg_1_1gamma__ctrl.html#o29">m_yt1</a> + <a class="code" href="classagg_1_1gamma__ctrl.html#o31">m_yt2</a>) * 0.5 - <a class="code" href="classagg_1_1gamma__ctrl.html#o18">m_text_height</a> * 0.5);
00252             <a class="code" href="classagg_1_1gamma__ctrl.html#o35">m_text_poly</a>.set_thickness(<a class="code" href="classagg_1_1gamma__ctrl.html#o16">m_text_thickness</a>);
00253             <a class="code" href="classagg_1_1gamma__ctrl.html#o35">m_text_poly</a>.reset_iterator(0);
00254             <font class="keywordflow">break</font>;
00255         }
00256     }
00257 
00258 
00259     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00260"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a27">00260</a>     <a class="code" href="namespaceagg.html#a63">pathflag_e</a> gamma_ctrl::next_vertex(<font class="keywordtype">double</font>* x, <font class="keywordtype">double</font>* y)
00261     {
00262         <a class="code" href="namespaceagg.html#a63">pathflag_e</a> flag = <a class="code" href="namespaceagg.html#a63a27">pathflag_line_to</a>;
00263         <font class="keywordflow">switch</font>(m_idx)
00264         {
00265         <font class="keywordflow">case</font> 0:
00266             <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 0) flag = <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00267             <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> &gt;= 4) flag = <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>;
00268             *x = <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>];
00269             *y = <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>];
00270             <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>++;
00271             <font class="keywordflow">break</font>;
00272 
00273         <font class="keywordflow">case</font> 1:
00274             <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 0 || <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 4 || <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 8) flag = <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00275             <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> &gt;= 12) flag = <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>;
00276             *x = <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>];
00277             *y = <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>];
00278             <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>++;
00279             <font class="keywordflow">break</font>;
00280 
00281         <font class="keywordflow">case</font> 2:
00282             flag = <a class="code" href="classagg_1_1gamma__ctrl.html#o32">m_curve_poly</a>.next_vertex(x, y);
00283             <font class="keywordflow">break</font>;
00284 
00285         <font class="keywordflow">case</font> 3:
00286             <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 0  || 
00287                <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 4  || 
00288                <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 8  ||
00289                <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> == 14) flag = <a class="code" href="namespaceagg.html#a63a26">pathflag_move_to</a>;
00290 
00291             <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a> &gt;= 20) flag = <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>;
00292             *x = <a class="code" href="classagg_1_1gamma__ctrl.html#o38">m_vx</a>[<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>];
00293             *y = <a class="code" href="classagg_1_1gamma__ctrl.html#o39">m_vy</a>[<a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>];
00294             <a class="code" href="classagg_1_1gamma__ctrl.html#o37">m_vertex</a>++;
00295             <font class="keywordflow">break</font>;
00296 
00297         <font class="keywordflow">case</font> 4:                 <font class="comment">// Point1</font>
00298         <font class="keywordflow">case</font> 5:                 <font class="comment">// Point2</font>
00299             flag = <a class="code" href="classagg_1_1gamma__ctrl.html#o33">m_ellipse</a>.next_vertex(x, y);
00300             <font class="keywordflow">break</font>;
00301 
00302         <font class="keywordflow">case</font> 6:
00303             flag = <a class="code" href="classagg_1_1gamma__ctrl.html#o35">m_text_poly</a>.next_vertex(x, y);
00304             <font class="keywordflow">break</font>;
00305 
00306         <font class="keywordflow">default</font>:
00307             flag = <a class="code" href="namespaceagg.html#a63a25">pathflag_stop</a>;
00308             <font class="keywordflow">break</font>;
00309         }
00310 
00311         <font class="keywordflow">return</font> flag;
00312     }
00313 
00314 
00315 
00316     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00317"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a17">00317</a>     <font class="keywordtype">bool</font> gamma_ctrl::on_arrow_keys(<font class="keywordtype">bool</font> left, <font class="keywordtype">bool</font> right, <font class="keywordtype">bool</font> down, <font class="keywordtype">bool</font> up)
00318     {
00319         <font class="keywordtype">double</font> kx1, ky1, kx2, ky2;
00320         <font class="keywordtype">bool</font> ret = <font class="keyword">false</font>;
00321         <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.get_values(&amp;kx1, &amp;ky1, &amp;kx2, &amp;ky2);
00322         <font class="keywordflow">if</font>(m_p1_active)
00323         {
00324             <font class="keywordflow">if</font>(left)  { kx1 -= 0.005; ret = <font class="keyword">true</font>; }
00325             <font class="keywordflow">if</font>(right) { kx1 += 0.005; ret = <font class="keyword">true</font>; }
00326             <font class="keywordflow">if</font>(down)  { ky1 -= 0.005; ret = <font class="keyword">true</font>; }
00327             <font class="keywordflow">if</font>(up)    { ky1 += 0.005; ret = <font class="keyword">true</font>; }
00328         }
00329         <font class="keywordflow">else</font>
00330         {
00331             <font class="keywordflow">if</font>(left)  { kx2 += 0.005; ret = <font class="keyword">true</font>; }
00332             <font class="keywordflow">if</font>(right) { kx2 -= 0.005; ret = <font class="keyword">true</font>; }
00333             <font class="keywordflow">if</font>(down)  { ky2 += 0.005; ret = <font class="keyword">true</font>; }
00334             <font class="keywordflow">if</font>(up)    { ky2 -= 0.005; ret = <font class="keyword">true</font>; }
00335         }
00336         <font class="keywordflow">if</font>(ret)
00337         {
00338             <a class="code" href="classagg_1_1gamma__ctrl.html#o4">m_gamma_spline</a>.set_values(kx1, ky1, kx2, ky2);
00339         }
00340         <font class="keywordflow">return</font> ret;
00341     }
00342 
00343 
00344     
00345     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00346"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a18">00346</a>     <font class="keywordtype">void</font> gamma_ctrl::change_active_point()
00347     {
00348         <a class="code" href="classagg_1_1gamma__ctrl.html#o44">m_p1_active</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o44">m_p1_active</a> ? <font class="keyword">false</font> : <font class="keyword">true</font>;
00349     }
00350 
00351 
00352 
00353     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00354"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a14">00354</a>     <font class="keywordtype">bool</font> gamma_ctrl::on_mouse_button_down(<font class="keywordtype">double</font> x, <font class="keywordtype">double</font> y)
00355     {
00356         <a class="code" href="classagg_1_1gamma__ctrl.html#c1">calc_points</a>();
00357 
00358         <font class="keywordflow">if</font>(<a class="code" href="namespaceagg.html#a50">calc_distance</a>(x, y, <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a>) &lt;= <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>)
00359         {
00360             <a class="code" href="classagg_1_1gamma__ctrl.html#o45">m_mouse_point</a> = 1;
00361             <a class="code" href="classagg_1_1gamma__ctrl.html#o46">m_pdx</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> - x;
00362             <a class="code" href="classagg_1_1gamma__ctrl.html#o47">m_pdy</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> - y;
00363             <a class="code" href="classagg_1_1gamma__ctrl.html#o44">m_p1_active</a> = <font class="keyword">true</font>;
00364             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00365         }
00366 
00367         <font class="keywordflow">if</font>(<a class="code" href="namespaceagg.html#a50">calc_distance</a>(x, y, <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a>, <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a>) &lt;= <a class="code" href="classagg_1_1gamma__ctrl.html#o17">m_point_size</a>)
00368         {
00369             <a class="code" href="classagg_1_1gamma__ctrl.html#o45">m_mouse_point</a> = 2;
00370             <a class="code" href="classagg_1_1gamma__ctrl.html#o46">m_pdx</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a> - x;
00371             <a class="code" href="classagg_1_1gamma__ctrl.html#o47">m_pdy</a> = <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a> - y;
00372             <a class="code" href="classagg_1_1gamma__ctrl.html#o44">m_p1_active</a> = <font class="keyword">false</font>;
00373             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00374         }
00375         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00376     }
00377 
00378 
00379     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00380"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a15">00380</a>     <font class="keywordtype">bool</font> gamma_ctrl::on_mouse_button_up(<font class="keywordtype">double</font>, <font class="keywordtype">double</font>)
00381     {
00382         <font class="keywordflow">if</font>(m_mouse_point)
00383         {
00384             <a class="code" href="classagg_1_1gamma__ctrl.html#o45">m_mouse_point</a> = 0;
00385             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00386         }
00387         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00388     }
00389 
00390 
00391     <font class="comment">//------------------------------------------------------------------------</font>
<a name="l00392"></a><a class="code" href="classagg_1_1gamma__ctrl.html#a16">00392</a>     <font class="keywordtype">bool</font> gamma_ctrl::on_mouse_move(<font class="keywordtype">double</font> x, <font class="keywordtype">double</font> y, <font class="keywordtype">bool</font> button_flag)
00393     {
00394         <font class="keywordflow">if</font>(!button_flag)
00395         {
00396             <font class="keywordflow">return</font> <a class="code" href="classagg_1_1gamma__ctrl.html#a15">on_mouse_button_up</a>(x, y);
00397         }
00398 
00399         <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o45">m_mouse_point</a> == 1)
00400         {
00401             <a class="code" href="classagg_1_1gamma__ctrl.html#o40">m_xp1</a> = x + <a class="code" href="classagg_1_1gamma__ctrl.html#o46">m_pdx</a>;
00402             <a class="code" href="classagg_1_1gamma__ctrl.html#o41">m_yp1</a> = y + <a class="code" href="classagg_1_1gamma__ctrl.html#o47">m_pdy</a>;
00403             <a class="code" href="classagg_1_1gamma__ctrl.html#c2">calc_values</a>();
00404             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00405         }
00406         <font class="keywordflow">if</font>(<a class="code" href="classagg_1_1gamma__ctrl.html#o45">m_mouse_point</a> == 2)
00407         {
00408             <a class="code" href="classagg_1_1gamma__ctrl.html#o42">m_xp2</a> = x + <a class="code" href="classagg_1_1gamma__ctrl.html#o46">m_pdx</a>;
00409             <a class="code" href="classagg_1_1gamma__ctrl.html#o43">m_yp2</a> = y + <a class="code" href="classagg_1_1gamma__ctrl.html#o47">m_pdy</a>;
00410             <a class="code" href="classagg_1_1gamma__ctrl.html#c2">calc_values</a>();
00411             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00412         }
00413         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00414     }
00415 
00416 
00417 
00418 }
00419 
</pre></div><hr><address><small>Generated on Tue Apr 23 09:06:33 2002 for AGG v2.0 beta by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
